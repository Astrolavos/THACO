import React from 'react';
import {CSVLink, CSVDownload} from 'react-csv';


class MalwareTable extends React.PureComponent {

  static propTypes = {
    samples: React.PropTypes.object,
    isPending: React.PropTypes.bool.isRequired,
  };

  render() {
    const {
      samples,
      isPending,
    } = this.props;

    const csvData = JSON.stringify(samples);
    const _filename = "malware";



    if (!samples && isPending) return <p>Loading...</p>;
    if (!samples && !isPending) return <p>No malware samples.</p>;

    return (
      <div>
       <div style={{float:'right',marginBottom: '5px', marginTop: '10px'}}>
            <CSVLink data={csvData} filename={_filename} >Download malware information (CSV format) <span className="glyphicon glyphicon-download" aria-hidden="true"></span>
            </CSVLink>
        </div> 

        <table className="table table-condensed">
          <thead>
            <tr>
              <th>Date</th>
              <th>Positives scans</th>
              <th>Total scans</th>
              <th>SHA256</th>
            </tr>
          </thead>
          <tbody>
            {samples.map(sample =>
              <tr key={sample.get('sha256')}>
                <th scope="row">
                  {sample.get('date')}
                </th>
                <th>
                  {sample.get('positives')}
                </th>
                <th>
                  {sample.get('total')}
                </th>
                <th>
                  {sample.get('sha256')}
                </th>
              </tr>
            )}
          </tbody>
        </table>
      </div>
    );
  }
}

export default MalwareTable;
